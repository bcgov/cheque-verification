# replicaCount is ignored when autoscaling is enabled
replicaCount: 2

image:
  repository: ghcr.io/bcgov/cheque-verification-backend
  tag: dev
  pullPolicy: Always

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

# Resource limits - based on actual usage (~40 MiB per pod)
# Combined budget: 500 MiB / 100m CPU for frontend + backend
resources:
  requests:
    memory: "40Mi"
    cpu: "5m"
  limits:
    memory: "80Mi"
    cpu: "15m"

# Horizontal Pod Autoscaler configuration
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 3
  # Scale up when CPU usage exceeds 70%
  targetCPUUtilizationPercentage: 70
  # Scale up when memory usage exceeds 80%
  targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget - ensures availability during cluster maintenance
podDisruptionBudget:
  enabled: true
  # Always keep at least 1 pod running during voluntary disruptions
  minAvailable: 1

nodeSelector: {}

tolerations: []

affinity: {}
